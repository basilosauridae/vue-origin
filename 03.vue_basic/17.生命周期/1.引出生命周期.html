<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å¼•å‡ºç”Ÿå‘½å‘¨æœŸ</title>
  <script src="../js/vue.min.js"></script>
</head>
<style>
  *{
    padding: 0;
    margin: 0;
    background-image: linear-gradient(#e9defa,#fad0c4);
    }
  h3{
    margin: 0 auto;
    text-align: center;
    padding: 430px;
  }
</style>
<body>
  <div id="root">
    <button @click="stop">ç‚¹å‡»åœæ­¢è·³åŠ¨â™¥</button>
    <button @click="opacity = 1">ç‚¹å‡»æ¢å¤â™¥çš„è‰²å½©</button>
    <h3 :style="{opacity}">â¤ğŸ§¡ğŸ’›ğŸ’šğŸ’™ğŸ’œğŸ¤ğŸ–¤ğŸ¤</h3>
  </div>
  <script type="text/javascript">
    new Vue({
      el:'#root',
      data:{
        opacity:1
      },
      // Vueå®Œæˆæ¨¡æ¿è§£æå¹¶æŠŠåˆå§‹çš„çœŸå®DOMå…ƒç´ æ”¾å…¥é¡µé¢åï¼ˆæŒ‚è½½å®Œæ¯•ï¼‰è°ƒç”¨mounted
      mounted() {
        this.change()
      },
      methods: {
        change(){
          this.timer = setInterval(() => {
            this.opacity -= 0.01
            if (this.opacity <= 0) this.opacity = 1
          }, 16)
        },
        // ç¬¬ä¸€ç§æ¸©æŸ”å¾—åœæ­¢å˜æ¢ï¼ˆå¯ä»¥æ¢å¤â™¥çš„é¢œè‰²ï¼‰
        /* stop(){
          clearInterval(this.timer)
        }, */

        //ç¬¬äºŒç§æš´åŠ›åœæ­¢ ç›´æ¥é”€æ¯å®ä¾‹ æ— æ³•æ¢å¤â™¥çš„é¢œè‰²
        stop(){
          this.$destroy()
        }
      },
       beforeDestroy() {
        console.log('åœ¨è¢«é”€æ¯ä¹‹å‰æ¸…æ¥šå®šæ—¶å™¨')
        clearInterval(this.timer)
        // ç¬¬äºŒç§æš´åŠ›æ¶ˆé™¤éœ€è¦åŠ ä¸ŠbeforeDestroyæ¶ˆé™¤å®šæ—¶å™¨
      }
    })
  </script>
</body>
</html>
<!-- 
  ç”Ÿå‘½å‘¨æœŸï¼š
  1.åˆåç”Ÿå‘½å‘¨æœŸå›è°ƒå‡½æ•°ã€ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€ç”Ÿå‘½å‘¨æœŸé’©å­
  2.å®šä¹‰ï¼šVueåœ¨å…³é”®æ—¶åˆ»å¸®æˆ‘ä»¬è°ƒç”¨çš„ä¸€äº›ç‰¹æ®Šåç§°çš„å‡½æ•°
  3.ç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„åå­—ä¸å¯æ›´æ”¹ï¼Œä½†å‡½æ•°çš„å…·ä½“å†…å®¹æ˜¯ç¨‹åºå‘˜æ ¹æ®éœ€æ±‚ç¼–å†™çš„
  4.ç”Ÿå‘½å‘¨æœŸä¸­çš„thisæŒ‡å‘æ˜¯vm æˆ– ç»„ä»¶å®ä¾‹å¯¹è±¡

  æ€»ç»“ï¼š
  1.å¸¸ç”¨çš„ç”Ÿå‘½å‘¨æœŸé’©å­
  mounted:å‘é€ajaxè¯·æ±‚ã€å¯åŠ¨å®šæ—¶å™¨ã€ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ã€è®¢é˜…æ¶ˆæ¯ç­‰ã€åˆå§‹åŒ–æ“ä½œã€‘
  beforeDestroy:æ¸…é™¤å®šæ—¶å™¨ã€ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ã€å–æ¶ˆè®¢é˜…æ¶ˆæ¯ç­‰è‡ªå®šä¹‰äº‹ä»¶ã€æ”¶å°¾å·¥ä½œã€‘

  2.å…³äºé”€æ¯Vueå®ä¾‹
  - é”€æ¯åå€ŸåŠ©Vueå¼€å‘è€…å·¥å…·çœ‹ä¸åˆ°ä»»ä½•ä¿¡æ¯
  - é”€æ¯åè‡ªå®šä¹‰äº‹ä»¶ä¼šå¤±æ•ˆ ä½†åŸç”ŸDOMä¾ç„¶æœ‰æ•ˆ
  - ä¸€èˆ¬ä¸ä¼šåœ¨beforeDestroyæ“ä½œæ•°æ® å³ä½¿æ“ä½œäº† ä¹Ÿä¸ä¼šå†è§¦å‘æ›´æ–°æµç¨‹äº†
-->